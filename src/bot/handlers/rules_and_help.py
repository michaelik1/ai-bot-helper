from aiogram import Router, F
from aiogram.types import Message
from os import getenv

handler_rules = Router()

async def build_rules():
    admin_ids = getenv("ADMINS").split(",")
    message_rules = """
<b>üìñ –ü—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ–º–æ—â—å</b>

<b>1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</b>  
–ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–∞—Å—Ç—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, —Ñ–ª—É–¥–∏—Ç—å –∏–ª–∏ —Å–ø–∞–º–∏—Ç—å –±–æ—Ç–∞.  
–ü—Ä–∏ –≤—ã—è–≤–ª–µ–Ω–∏–∏ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–≥—Ä–∞–Ω–∏—á–µ–Ω.

<b>2. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</b>  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è, —Å–æ–≤–µ—Ä—à–∞–µ–º—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–æ—Ç–∞.  
–ò—Å–ø–æ–ª—å–∑—É—è –±–æ—Ç–∞, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –Ω–∞ —Å–µ–±—è –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.

<b>3. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</b>  
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø—Ä—è–º–æ–π –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω—ã–π —É—â–µ—Ä–±, –≤–æ–∑–Ω–∏–∫—à–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
<b>üì© –ö–æ–Ω—Ç–∞–∫—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</b>
    """
    for admin_id in admin_ids:
        message_rules += f'üîπ <a href="tg://user?id={admin_id}">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</a>\n'
    return message_rules

@handler_rules.message(F.text == "üõü–ü—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ–º–æ—â—å")
async def rules(message: Message):
    rules_msg = await build_rules()
    await message.answer(rules_msg, parse_mode="HTML")